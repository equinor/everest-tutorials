definitions:          
  case_name: WELLTRAJECTORY_EXP
  realization_folder: r{{configpath}}/../../../fmu-drogon-flow-files/realization-r{{realization}}/iter-0/eclipse
  eclbase: simulator/model/DROGON
  
environment:
  simulation_folder: r{{configpath}}/../output/r{{case_name}}/simulation_output
  output_folder: r{{configpath}}/../output/r{{case_name}}
  random_seed: 202220928

wells:
  - {name: A1}
  - {name: A2}
  - {name: A3}
  - {name: A4}
  - {name: A5}
  - {name: A6}

controls:
  - name: p1_x
    type: generic_control         
    perturbation_magnitude: 75
    min: 459341
    max: 466548
    variables:
      - {name: A1, initial_guess: 462191}  
      - {name: A2, initial_guess: 461116}  
      - {name: A3, initial_guess: 462665}  
      - {name: A4, initial_guess: 463743} 
      - {name: A5, initial_guess: 461553} 
      - {name: A6, initial_guess: 461362} 
  - name: p1_y
    type: generic_control         
    perturbation_magnitude: 75
    min: 5929863
    max: 5936166
    variables:
      - {name: A1, initial_guess:  5934104} 
      - {name: A2, initial_guess:  5933799}
      - {name: A3, initial_guess:  5932804}
      - {name: A4, initial_guess:  5931578}
      - {name: A5, initial_guess:  5935779}
      - {name: A6, initial_guess:  5931866}
  - name: p1_z
    type: generic_control         
    perturbation_magnitude: 3
    min: 1566.5
    max: 1699.5
    variables:
      - {name: A1, initial_guess: 1597.8}  
      - {name: A2, initial_guess: 1635.5}
      - {name: A3, initial_guess: 1609.0}
      - {name: A4, initial_guess: 1629.0}
      - {name: A5, initial_guess: 1689.1}
      - {name: A6, initial_guess: 1689.5}
  - name: p2_a
    type: generic_control         
    perturbation_magnitude: 0.01
    min: 0.0
    max: 1.0
    variables:
      - {name: A1, initial_guess:  0.5}
      - {name: A2, initial_guess:  0.5}
      - {name: A3, initial_guess:  0.5}
      - {name: A4, initial_guess:  0.5}
      - {name: A5, initial_guess:  0.5}
      - {name: A6, initial_guess:  0.5}
  - name: p2_b
    type: generic_control         
    perturbation_magnitude: 0.01
    min: -0.3
    max:  0.3
    variables:
      - {name: A1, initial_guess:  0.0}
      - {name: A2, initial_guess:  0.0}
      - {name: A3, initial_guess:  0.0}
      - {name: A4, initial_guess:  0.0}
      - {name: A5, initial_guess:  0.0}
      - {name: A6, initial_guess:  0.0} 
  - name: p2_c
    type: generic_control         
    perturbation_magnitude: 0.01
    min: 0.0
    max: 1.0
    variables:
      - {name: A1, initial_guess:  0.5}
      - {name: A2, initial_guess:  0.5}
      - {name: A3, initial_guess:  0.5}
      - {name: A4, initial_guess:  0.5}
      - {name: A5, initial_guess:  0.5}
      - {name: A6, initial_guess:  0.5}
  - name: p3_x
    type: generic_control         
    perturbation_magnitude: 125
    min: 459341
    max: 466548
    variables:
      - {name: A1, initial_guess: 462514}
      - {name: A2, initial_guess: 461112}
      - {name: A3, initial_guess: 462781}
      - {name: A4, initial_guess: 464353}
      - {name: A5, initial_guess: 461527}
      - {name: A6, initial_guess: 461369}
  - name: p3_y
    type: generic_control         
    perturbation_magnitude: 125
    min: 5929863
    max: 5936166
    variables:
      - {name: A1, initial_guess:  5934070}
      - {name: A2, initial_guess:  5933739}
      - {name: A3, initial_guess:  5932778}
      - {name: A4, initial_guess:  5932734}
      - {name: A5, initial_guess:  5935588}
      - {name: A6, initial_guess:  5931801}
  - name: p3_z
    type: generic_control         
    perturbation_magnitude: 3
    min: 1566.5
    max: 1739
    variables:
      - {name: A1, initial_guess:  1637.3} 
      - {name: A2, initial_guess:  1645.0} 
      - {name: A3, initial_guess:  1651.6} 
      - {name: A4, initial_guess:  1657.0} 
      - {name: A5, initial_guess:  1719.4}
      - {name: A6, initial_guess:  1728.7}

objective_functions:
  - name: npv
    auto_scale: True
    
optimization:
  min_realizations_success: 50
  max_batch_num: 10
  perturbation_num: 1
  options:
    - "max_step = 0.1"

model:
  realizations: 0-99

simulator:
  queue_system:
    name: lsf

install_data:
  - link: True
    source: r{{realization_folder}}/include
    target: simulator/include 
  - link: False
    source: r{{configpath}}/../../simulator/model
    target: simulator/model
  - link: True
    source: r{{configpath}}/../input
    target: input
  - link: False
    source: r{{configpath}}/../input/prices.yml
    target: prices.yml

forward_model:
  - well_trajectory -c input/well_trajectory_config.yml -E r{{realization_folder}}/model/DROGON-r{{realization}}
  - job: flow r{{eclbase}} --enable-tuning=true
    results:
      file_name: r{{eclbase}}
      type: summary
  - npv -s r{{eclbase}}.UNSMRY -o npv -c prices.yml -i input/readydates.json -sd 2022-09-03 -ed 2027-01-01 
